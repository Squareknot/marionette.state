{"version":3,"file":"marionette.state.min.js","sources":["marionette.state.js"],"names":["root","factory","define","amd","Backbone","Marionette","_","exports","require","module","this","Bb","Mn","State","Object","extend","modelClass","undefined","defaultState","componentEvents","_model","_component","_initialState","constructor","options","component","setComponent","Model","resetState","initialState","__super__","apply","arguments","attrs","reset","getModel","getInitialState","clone","resetAttrs","set","Error","get","eventedObj","stopListening","unbindEntityEvents","listenToOnce","destroy","bindEntityEvents","getComponent","syncEntityEvents","entity","entityEvents","Behavior","initialize","stateClass","StateClass","syncEvent","stateOptions","view","_mapOptions","mapOptions","state","stateModel","stateEvents","when","serialize","_wrapSerializeData","mappings","object","map","_mapOption","viewOptionKey","stateOptionKey","stateOptionValue","isString","reduce","split","memo","key","isFunction","call","serializeData","data","stateAttrs","attributes","isUndefined","isObject","_mergeAttrs","target","attr","callHandlers","handlers","value","handlerKeys","spaceMatcher","each","handlerKey","syncBinding","event","changeMatch","Collection","match","changeMatcher","syncBindings","events","syncBindingsHash","bindings","eventStr","Syncing","prototype","eventObj","handler","partial","__syncingEntityEvents","push","listenTo","now","stopSyncingEntityEvents","syncing"],"mappings":"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"}